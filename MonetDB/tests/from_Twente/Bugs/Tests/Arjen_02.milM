#
# Another interesting bug in our newest (=august) Monet release:
# 
#  Arjen (arjen@cs.utwente.nl)
# 

setoid(2000@0);

a := new( void, int );
a.insert( nil, 0 );
a.insert( nil, 1 );
a.insert( nil, 2 );
a.seqbase(0@0).print;

A := 0;
aA := [=]( a, A );   aA.print;
aA2 := uselect(aA, true).mark(0@0);   aA2.print;

print(a.info.access(BAT_WRITE).delete("batBuns.base").col_name("a"),aA.info.col_name("aA"),aA2.info.col_name("aA2"));

A := 1;
aA := [=]( a, A );   aA.print;
aA2 := uselect(aA, true).mark(0@0);   aA2.print;

print(a.info.access(BAT_WRITE).delete("batBuns.base").col_name("a"),aA.info.col_name("aA"),aA2.info.col_name("aA2"));

# BUT...

A := 2;
aA := [=]( a, A );   aA.print;
aA2 := uselect(aA, true).mark(0@0);   aA2.print;

print(a.info.access(BAT_WRITE).delete("batBuns.base").col_name("a"),aA.info.col_name("aA"),aA2.info.col_name("aA2"));

# interesting...

quit;
